<div class="row align-center mb-5">
    <p>{{concept.title}}<br>Created By {{concept.creator.username}}</p>
    <p>{{{concept.text}}}</p>
    <button class="btn" id="Delete User">Delete User</button>
</div>
<div>
{{#each concept.comments as |comment|}}
  <p> Comment added {{comment.createdAt}} by {{comment.creator.username}}: </p>
  <p>{{comment.comment}}:: </p>
{{/each}}
  <form class="form new-comment">
    <input type="text" id="newComment"></input> 
    <button id="new-comment" class="btn btn-primary">Post Comment</button>
  </form>
</div>

<script>
  const addCommentFormHandler = async (event) => {
    console.log(`triggered add comment form handler`)
    event.preventDefault();
  
    const newComment = document.querySelector('#newComment').value.trim();
    console.log(newComment);

    if (newComment.length > 0) {
        const response = await fetch('/api/sparks/comment/' + {{concept.id}}, {
            method: 'POST',
            body: `{"comment": "${newComment}"}`,
            headers: { 'Content-Type': 'application/json' },
        });
        console.log(response)
        if (response.ok) {
            document.location.reload();
        } else {
            alert('Could not post data');
        }
    }
};
document
    .querySelector('.new-comment')
    .addEventListener('submit', addCommentFormHandler);
</script>